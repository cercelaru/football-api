### Installation
---
```
$ git clone https://github.com/cercelaru/football-api
$ cd football-api
$ composer install
$ php bin/console server:start
```
Afterwards, please configure your local db credentials in the '.env' file and run the following
```
$ php bin/console doctrine:database:create
$ php bin/console doctrine:schema:create
$ php bin/console doctrine:fixtures:load
```
The above will create the db and load it with fixtures (users, teams, and leagues)
It will create the following test user:
- username : 'testuser'
- password : 'testpass'

You can use the above user to obtain the token which will be used to authenticate when calling the endpoints,


### Endpoints
---
#### Create token
URL: **/tokens**

Method: **POST**

Example Payload : 

{
	"username":"testuser",
	"password":"testpass"
}

Example URL : 
http://127.0.0.1:8001/tokens
---
#### Get teams in league
URL: **/leagues/:leagueId/teams**

Method: **GET**

Example Url : 
http://127.0.0.1:8001/leagues/935e1c7e-2631-4d9f-aa8d-491323e3557b/teams

To get an existing league id (generated by the fixtures), please use your local MySql client to fetch it from the db :
```
SELECT id from leagues;
```
and use one of them in the endpoint url

---
#### Create team
URL: **/leagues/:leagueId/teams**

Method: **POST**

Example Payload : 
{
  "name": "Test team",
  "strip": "Test strip"
}

Example URL : 
http://127.0.0.1:8001/leagues/b4406774-c5f4-4864-8425-5c0e66fb3d27/teams

---
#### Update team
URL: **/teams/:teamId**

Method: **PUT**

Example Payload : 
{
  "name": "Test team",
  "strip": "Test strip"
}

Example URL : 
http://127.0.0.1:8001/teams/ead4a88a-cddc-4e1d-a62b-df991a6cfe2c

---
#### Delete league
URL: **/leagues/:leagueId**

Method: **DELETE**


Example URL : 
http://127.0.0.1:8001/leagues/ece3046c-857d-4885-8272-b9f8804b4831

---


### Run unit tests
```
php vendor/bin/phpunit
```

